<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.effect.DropShadow?>

<?import javafx.scene.shape.Circle?>
<VBox spacing="20" alignment="TOP_CENTER" prefHeight="800.0" prefWidth="1000.0"
      style="-fx-background-color: #F4F7FB;" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.example.javaproject.controllers.PointageController">
    <padding><Insets top="30" right="30" bottom="30" left="30"/></padding>
    <children>

        <VBox alignment="CENTER" spacing="5">
            <Label text="SystÃ¨me de Pointage Professionnel" style="-fx-font-size: 28; -fx-font-weight: 800; -fx-text-fill: #2D3748;"/>
            <Label text="GÃ©rez vos prÃ©sences en temps rÃ©el" style="-fx-text-fill: #718096; -fx-font-size: 14;"/>
        </VBox>
        <?import javafx.scene.shape.Circle?>

        <HBox spacing="10" alignment="CENTER" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 20; -fx-max-width: 300;">
            <children>
                <Circle fx:id="statusDot" radius="8" fill="#cbd5e0" />
                <Label fx:id="statusLabel" text="Chargement..." style="-fx-font-weight: bold; -fx-text-fill: #4A5568;"/>
            </children>
            <effect><DropShadow color="#00000011" radius="5" offsetY="2" /></effect>
        </HBox>
        <HBox spacing="25" alignment="CENTER">
            <children>
                <HBox spacing="15" alignment="CENTER">
                    <children>
                        <Button onAction="#handleArrivee" text="ðŸ›« ENTRÃ‰E" prefHeight="50" prefWidth="180"
                                style="-fx-background-color: #2ecc71; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 10;"/>

                        <Button onAction="#handlePause" text="â˜• PAUSE / REPRISE" prefHeight="50" prefWidth="180"
                                style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 10; -fx-cursor: hand;">
                            <effect><DropShadow color="#3498db44" radius="10" offsetY="4" /></effect>
                        </Button>

                        <Button onAction="#handleDepart" text="ðŸ›¬ SORTIE" prefHeight="50" prefWidth="180"
                                style="-fx-background-color: #e67e22; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 10;"/>
                    </children>
                </HBox>
            </children>
        </HBox>

        <Label fx:id="statusMessage" text="" style="-fx-text-fill: #27ae60; -fx-font-weight: bold; -fx-font-size: 15;"/>

        <Separator maxWidth="800" opacity="0.3"/>

        <HBox spacing="15" alignment="CENTER_LEFT" maxWidth="900">
            <children>
                <Label text="ðŸ” Rechercher dans l'historique :" style="-fx-font-weight: bold; -fx-text-fill: #4A5568;"/>
                <TextField fx:id="filterField" promptText="Tapez une date (ex: 2024-05) ou un type..."
                           prefWidth="350" style="-fx-background-radius: 10; -fx-padding: 8; -fx-border-color: #CBD5E0; -fx-border-radius: 10;"/>
            </children>
        </HBox>

        <TableView fx:id="historyTable" VBox.vgrow="ALWAYS"
                   style="-fx-background-radius: 15; -fx-border-color: #E2E8F0; -fx-border-radius: 15; -fx-background-color: white;">
            <columns>
                <TableColumn fx:id="colDate" text="Date de l'action" prefWidth="300">
                    <cellValueFactory><PropertyValueFactory property="datePointage"/></cellValueFactory>
                </TableColumn>

                <TableColumn fx:id="colHeure" text="Heure PrÃ©cise (HH:mm:ss)" prefWidth="300">
                    <cellValueFactory><PropertyValueFactory property="heurePointage"/></cellValueFactory>
                </TableColumn>

                <TableColumn fx:id="colType" text="Type d'Action" prefWidth="300">
                    <cellValueFactory><PropertyValueFactory property="typePointage"/></cellValueFactory>
                </TableColumn>
            </columns>
            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
            </columnResizePolicy>
        </TableView>

        <HBox alignment="CENTER_RIGHT" spacing="15"
              style="-fx-background-color: #2D3748; -fx-padding: 20; -fx-background-radius: 15;">
            <children>
                <Label text="TEMPS DE TRAVAIL TOTAL (AUJOURD'HUI) :" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                <Label fx:id="totalHoursLabel" text="00h 00m 00s"
                       style="-fx-font-size: 20; -fx-font-weight: 900; -fx-text-fill: #2ecc71;"/>
            </children>
            <effect><DropShadow color="#00000033" radius="5" offsetY="2" /></effect>
        </HBox>

        <Button onAction="#goBack" text="â† Retour Ã  l'espace personnel"
                style="-fx-background-color: transparent; -fx-text-fill: #4A90E2; -fx-font-weight: bold; -fx-cursor: hand; -fx-underline: true;"/>
    </children>
</VBox>